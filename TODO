- hash array and function type lookup
- hash name lookup
- rewrite x = x + .. and x = x -... etc as += -=
- Turn the frame the other way up ?
- Track register state on backend
- Fix up the canonical and array decay - check decay to array type
- setjmp/longjmp
- Have O_ op table tight packed and rerite T_ into O_ entries, then have a property table
  for them (memread, memwrite, modworking, sideffect, setcc, communtatitve)
- Teach NSTORE etc to also do label forms for local statics

Broken 
-	constify needs a hard stare or two
-	need to switch how we handle -ve numbers to fix -32768 problem but also
	stuff like negative floats. In check for MINUS/PLUS we need to look for
	-ve constant and if so invert it and re-insert a fake MINUS token
-	Fix
		{ int n; { long n; } } - need to know if we are creating new sym level
-	Fix
	void (*p)(void); void x(void);   if (p == x) - bad type (&x works)


Longer term
- z80 6809 style helpers for catching simpler ops and doing them via pairs
  of (ix) ops
- backend hooks for building stack frame via initializers
- literal based handling for some types (set by target) - eg double/longlong
  so that we pass pointers around including one to a memory "register". 
  &x will need care as do casts
- do we want to go to some kind of table rule parsing model over the
  current code based one ?
- look at some kind of simple register assignment rewriting so that 6803/6809
  etc can try and rewrite some subtrees to use an index register, and maybe
  also eliminate the push case for some of those
- how to deal with Z80 sanely
- simple register tracking helper library
- rewrite && and || and maybe ?: so that we don't have
  (AND (BOOL (x)) (BOOL(y))) but some kind of
  BOOL(AND(CC(x) CC(y))) and work on condition code plus a tidy if needed so
  that we can have ccode setting trees that drop the top bool if the CC is
  ok.
- 6809 - use pshs/puls as a sneaky tight way to mod the stack
- Optimizer pass for tree rearrangement ?
- Whilst we need to be careful for side effects on * 0, we don't for and/or
  subtrees with && || so should deal with those
- cc0 and the -32768 funny (understand a little of previous token is needed)
- native compile support for machines where a pointer is a native long type. Cross
  is going to be fine usually
- Write tree size before each expr and load and chain multiple trees if room
  Does need care handling any extra header stuff in the way.
- Can we walk the subtrees looking for the most repeated left/right expensive
  refs (ie locals on 8080 or Z80) and rewrite the tree so the most common is
  in BC, then work up the tree to decide what to use BC for ?
- 8080 pass first argument in HL, so defer final push before func call. Then
  can xthl push hl to get stack in order, and do cleanup of all args on
  the return path instead of caller - would need vararg help for cleanup ?
- 8080 rewrite  SHL(constant 1, by n) into a 1 << n node so we can gen a
  fast 1 << n (lookup table ?)
- Walk subtrees of logic ops to try and optimize bools if value not used and subnodes just
  need cc
